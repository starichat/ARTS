> 位运算使用 CPU 寄存器进行计算，能极大的提高程序的运算效率，于是整理了一些关于 Java 位运算的技巧。  
  
## 基本的位运算概念  
  
#### 左移（<<）  
  
> 5<<2   
将5转换成二进制 0000 0000 0000 0000 0000 0000 0000 0101 ，左移两位右补 0  
即 0000 0000 0000 0000 0000 0000 0001 0100  即 十进制 20，可以理解为 5 * 2^2

#### 右移（>>）  
  
 > 5>>2   
将5转换成二进制 0000 0000 0000 0000 0000 0000 0000 0101，右移两位，正数左补 0，负数左补 1，  
即 0000 0000 0000 0000 0000 0000 0000 0001 即 1，可以理解为 5 / 2^2 取整
    
#### 无符号右移（>>>） 
 
> int类型占32位，可以表示一个正数，也可以表示一个负数。正数换算成二进制后的最高位为0，负数的二进制最高为为1  
> -5 换算成二进制后为：1111 1111 1111 1111 1111 1111 1111 1011（补码）  
无符号右移即左补 0，即 0001 1111 1111 1111 1111 1111 1111 1111，结果为十进制 536870911。
  
#### 位与（&） 
  
> 位与：第一个操作数的的第n位于第二个操作数的第n位如果都是1，那么结果的第n为也为1，否则为0
> 
> 5 & 3  
5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101 
> 
> 3转换为二进制：0000 0000 0000 0000 0000 0000 0000 0011 
> 
> 结果为：0000 0000 0000 0000 0000 0000 0000 0001 即十进制 1
  
#### 位或（|） 

> 位或：第一个操作数的的第n位于第二个操作数的第n位 只要有一个是1，那么结果的第n为也为1，否则为0
> 
> 5 | 3  
5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101 
> 
> 3转换为二进制：0000 0000 0000 0000 0000 0000 0000 0011 
> 
> 结果为：0000 0000 0000 0000 0000 0000 0000 0111 即十进制 7
  
#### 位异或（^） 

> 位异或：第一个操作数的的第n位于第二个操作数的第n位 相反，那么结果的第n为也为1，否则为0
> 
> 5 ^ 3  
5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101 
> 
> 3转换为二进制：0000 0000 0000 0000 0000 0000 0000 0011 
> 
> 结果为：0000 0000 0000 0000 0000 0000 0000 0110 即十进制 6
  
#### 位非（~）  
  
> 位非：操作数的第n位为1，那么结果的第n位为0，反之  
> 
> 5转换为二进制：0000 0000 0000 0000 0000 0000 0000 0101  
> 
> 结果为 1111 1111 1111 1111 1111 1111 1111 1010 即十进制 -6  
  
## 程序中位运算的技巧  
  
#### 求 int 的最大值  
> (1 << 31) - 1  或者 ~(1 << 31)
  
#### 求 int 的最小值  
> 1 << 31 或者 1 << -1  

#### 求 long 的最大值  
> ((long)1 << 127) - 1  
  
#### 求一个数的奇偶  
> (n & 1) == 1 //此时为奇数  
  
#### 不用临时变量交换两个数  
> a ^= b;  
> 
> b ^= a;
> 
> a ^= b;  
  
#### 取绝对值 
> (n ^ (n >> 31)) - (n >> 31)  
> n>>31 取得n的符号，若n为正数，n>>31等于0，若n为负数，n>>31等于-1
若n为正数 n ^ 0 = 0,数不变，若n为负数有n ^ -1 需要计算 n 和 -1 的补码，然后进行异或运算，
结果 n 变号并且为 n 的绝对值减 1，再减去 -1 就是绝对值  
  
#### 取两个数的最大值  
> b & ((a-b) >> 31) | a & (~(a-b) >> 31)  
  
#### 取两个数的最小值  
> a & ((a-b) >> 31) | b & (~(a-b) >> 31)  
  
#### 判断符号是否相同  
> (x ^ y) >= 0  
  
#### 计算2的n次方  
> 2 << (n-1)  
  
#### 判断一个数是不是2的幂  
> n > 0 ? (n & (n - 1)) == 0 : false;  
  
#### 对2的n次方取余  
> m & (n - 1)  
  
#### 求两个整数的平均值  
> (x + y) >> 1  
  
#### 从低位到高位,取n的第m位  
> (n >> (m-1)) & 1  
  
#### 从低位到高位.将n的第m位置为1  
> n | (1 << (m-1))  
  
#### 从低位到高位,将n的第m位置0  
> n & ~(1 << (m-1))  
  
#### 计算n+1  
> - ~ n  
  
#### 计算n-1  
> ~ - n  
  
#### 取相反数  
> ~n + 1  
  
#### if(x == a) x = b; if(x == b) x = a;  
> x = a ^ b ^ x;  
  
#### sign函数，参数为n，当n>0时候返回1，n<0时返回-1，n=0时返回0  
> !!n - (((unsigned)n >> 31) << 1)