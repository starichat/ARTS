用 SumatraPDF 复制文字时，总会出现文字重复的问题。在阅读[这篇文章](https://type.cyhsu.xyz/2018/12/why-do-pdf-copy-results-in-preview-app-have-redundant-characters/)后，有了一些理解。在这里做一下记录和分享。

根据经验，**文字复制中的故障往往与编码有关**，而 PDF 格式正是编码问题的大户。

在原文作者之前的文章中题过，PDF 格式是「不识字」的。在显示文字时，阅读器只是机械地根据 PDF 语句的指令，将字体资源中特定码位的字形绘制在坐标指定的位置，而并不关心自己画出来的到底是什么字。只有在进行复制、搜索等操作时，PDF 才会根据内嵌的 CMap，将内部字体的编码和 Unicode 编码对应起来。因此，如果 CMap 缺失或损坏，就无法从 PDF 中正常复制文字，但并不影响文档的外观。

而经过作者探索发现，PDF 在 CMap 中作「一对多」的映射，这是复制文字重复的元凶，而非编码问题。「一对多」的映射并不是一种冗余或者混淆，而是为了适应机器和用户的不同需要而必须加入的特殊处理。说到底，还是预览 app 的优化功夫没下到家，没有意识到 PDF 文本在显示、复制、搜索时应该受到不同的对待。这也再次应证了我之前文章中的一个观点：PDF 阅读器很多时候拼的不是功能有多丰富（反正都拼不过亲儿子 Acrobat），而是能不能做好复制、搜索这些基础功能的细节。